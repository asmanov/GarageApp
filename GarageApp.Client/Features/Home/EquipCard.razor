@inject StorageService StorageService

<MudItem xs="12" sm="6" md="4" lg="3" style="margin: 3px; border-radius: 10px">
    <MudCard>
        <MudCardMedia ObjectFit="ObjectFit.ScaleDown" Height="400" Elevation="100"
        Class="rounded-lg ma-2" Image=@Equipment.Image>

        </MudCardMedia>
        <MudCardContent>
            <MudText Typo="Typo.h4"><b/>@Equipment.RegistrationNumber</MudText>
            <MudText Typo="Typo.body2"><b />Марка: @Equipment.BrandName</MudText>
            <MudText Typo="Typo.body2"><b />Модель: @Equipment.ModelName</MudText>
            <MudText Typo="Typo.body2"><b />Рік випуску: @Equipment.Year</MudText>
            @if (Equipment.Euro != 0)
            {
                <MudText Typo="Typo.body2"><b />Рівень екологічних норм: @Equipment.Euro</MudText>
            }
            @if ((Equipment.Euro > 4 || Equipment.Euro == 0) && Equipment.GreenStart is null)
            {
                <MudAlert Severity="Severity.Error" Variant="Variant.Filled" Dense="true" Class="my-2">Зелена карта відсутня</MudAlert>
            }
            @if (Equipment.OsagoStart is null)
            {
                <MudAlert Severity="Severity.Error" Variant="Variant.Filled" Dense="true" Class="my-2">ОСЦПВ відсутнє</MudAlert>
            }
            @if (Equipment.KaskoStart is null)
            {
                <MudAlert Severity="Severity.Error" Variant="Variant.Filled" Dense="true" Class="my-2">КАСКО відсутня</MudAlert>
            }
            @if (Equipment.TachoStart is null && Equipment.Euro > 0)
            {
                <MudAlert Severity="Severity.Error" Variant="Variant.Filled" Dense="true" Class="my-2">Адаптація тахографа</MudAlert>
            }
            @if (Equipment.InspectionStart is null)
            {
                <MudAlert Severity="Severity.Error" Variant="Variant.Filled" Dense="true" Class="my-2">Треба провести техничну інспекцію</MudAlert>
            }
        </MudCardContent>
        <MudCardActions>
            <MudButton Variant="Variant.Text" Color="Color.Primary" OnClick="@(async () => await OnSelected.InvokeAsync(Equipment))">Learn More</MudButton >
        </MudCardActions>
    </MudCard>
</MudItem>


@code {
    [Parameter, EditorRequired]
    public Equipment Equipment { get; set; } = default!;

    [Parameter]
    public EventCallback<Equipment> OnSelected { get; set; }
}
